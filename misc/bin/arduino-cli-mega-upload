#!/bin/bash

prgm="$1"
port="$2"
shift
shift
args=""

for arg in "$@"; do
  args="$args\"$arg\" "
done

if [[ "$args" == "" ]]; then
  args="[none]"
fi

echo -e "\x1b[1;96mUploading program \"$prgm\" to Arduino Mega on port \"$port\"...\nFlags/arguments: $args\x1b[0m\n"
arduino-cli upload -p "$port" --fqbn arduino:avr:mega "$@" "$prgm"
